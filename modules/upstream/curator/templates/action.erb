  <%= @order -%>:
    action: <%= @action %>
    description: <%= @description %>
    options:
      continue_if_exception: <%= @continue_if_exception %>
      disable_action: <%= @disable_action %>
      ignore_empty_list: <%= @ignore_empty_list %>
<% if @ignore_unavailable then %>      ignore_unavailable: <%= @ignore_unavailable %>
<% end -%>
<% if @allocation_type and ! @post_allocation then %>      allocation_type: <%= @allocation_type %>
<% end -%>
<% if @count then %>      count: <%= @count %>
<% end -%>
<% if @copy_aliases then %>      copy_aliases: <%= @copy_aliases %>
<% end -%>
<% if @delay then %>      delay: <%= @delay %>
<% end -%>
<% if @delete_after then %>      delete_after: <%= @delete_after %>
<% end -%>
<% if @delete_aliases then %>      delete_aliases: <%= @delete_aliases %>
<% end -%>
<% if @include_aliases then %>      include_aliases: <%= @include_aliases %>
<% end -%>
<% if @include_global_state then %>      include_global_state: <%= @include_global_state %>
<% end -%>
<% if @indices then %>      indices: <%= @indices %>
<% end -%>
<% if @key and ! @post_allocation then %>      key: <%= @key %>
<% end -%>
<% if @max_num_segments then %>      max_num_segments: <%= @max_num_segments %>
<% end -%>
<% if @number_of_replicas then %>      number_of_replicas: <%= @number_of_replicas %>
<% end -%>
<% if @number_of_shards then %>      number_of_shards: <%= @number_of_shards %>
<% end -%>
<% if @option_name then %>      name: <%= @option_name %>
<% end -%>
<% if @partial then %>      partial: <%= @partial %>
<% end -%>
<% if @post_allocation then %>      post_allocation:
<% if @allocation_type then %>        allocation_type: <%= @allocation_type %>
<% end -%>
<% if @key then %>        key: <%= @key %>
<% end -%>
<% if @value then %>        value: <%= @value %>
<% end -%>
<% end -%>
<% if @rename_pattern then %>      rename_pattern: <%= @rename_pattern %>
<% end -%>
<% if @rename_replacement then %>      rename_replacement: <%= @rename_replacement %>
<% end -%>
<% if @repository then %>      repository: <%= @repository %>
<% end -%>
<% if @retry_count then %>      retry_count: <%= @retry_count %>
<% end -%>
<% if @retry_interval then %>      retry_interval: <%= @retry_interval %>
<% end -%>
<% if @shrink_node then %>      shrink_node: <%= @shrink_node %>
<% end -%>
<% if @shrink_prefix then %>      shrink_prefix: <%= @shrink_prefix %>
<% end -%>
<% if @shrink_suffix then %>      shrink_suffix: <%= @shrink_suffix %>
<% end -%>
<% if @skip_repo_fs_check then %>      skip_repo_fs_check: <%= @skip_repo_fs_check %>
<% end -%>
<% if @timeout_override then %>      timeout_override: <%= @timeout_override %>
<% end -%>
<% if @value and ! @post_allocation then %>      value: <%= @value %>
<% end -%>
<% if @wait_for_completion then %>      wait_for_completion: <%= @wait_for_completion %>
<% end -%>
<% if @wait_for_active_shards then %>      wait_for_active_shards: <%= @wait_for_active_shards %>
<% end -%>
<% if @wait_for_rebalance then %>      wait_for_rebalance: <%= @wait_for_rebalance %>
<% end -%>
<% if @for_alias_only_TBD then -%>
    add/remove:
      filters:
      - filtertype: *first*
        filter_element1: value1
        ...
        filter_elementN: valueN
      - filtertype: *second*
        filter_element1: value1
        ...
        filter_elementN: valueN
<% end -%><% if @node_filters then -%>
      node_filters: <% @node_filters.each do |key, value| %>
        <%= key -%>: <%= value %>
<% end -%><% end -%>
    filters:
<% @filters.each do |filter| -%>
    - filtertype: <%= filter['filtertype'] %>
<% filter.tap{|x| x.delete('filtertype')}.sort.each do |key, value| -%>
      <%= key -%>: <%= value %>
<% end -%>
<% end -%>
